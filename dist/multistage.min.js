var Multistage;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function r(e){return"string"==typeof e&&!isNaN(e)&&!isNaN(parseFloat(e))}function n(e,t,r){t.split(" ").filter(Boolean).forEach((t=>{e.classList[r](t)}))}function i(e,t){Object.keys(e).forEach((r=>{let n=e[r];null===n?t.removeAttribute(r):t.setAttribute(r,n)}))}function a(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&("object"!=typeof e[n]||null===e[n]||Array.isArray(e[n])?r[n]=e[n]:r[n]=a(e[n],t[n]||{}));for(const e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function s(e,t){e.style.display=t.active.display,i(t.active.attributes,e),n(e,t.inactive.classes,"remove"),n(e,t.active.classes,"add")}function o(e,t){e.style.display=t.inactive.display,i(t.inactive.attributes,e),n(e,t.active.classes,"remove"),n(e,t.inactive.classes,"add")}e.d(t,{default:()=>c});const c=class{constructor(e,t={}){t=a({directChildrenOnly:!0,active:{classes:"multistage-active",display:"block",attributes:{}},inactive:{classes:"",display:"none",attributes:{}},loop:!0,fn:{beforeIncrement:()=>{},beforeDecrement:()=>{},afterIncrement:()=>{},afterDecrement:()=>{}}},t),this.directChildrenOnly=t.directChildrenOnly,this.active=t.active,this.inactive=t.inactive,this.loop=t.loop,this.fn=t.fn,this.#e(e)}#e(e){if(!e)return console.error("The container is null"),!1;if(!e.nodeType)try{e=document.querySelector(e)}catch(e){return void(e instanceof SyntaxError?console.error("Invalid selector"):console.error(e))}return Object.defineProperty(this,"activeIndex",{get:function(){let t=this.stages,r=this.directChildrenOnly?e.querySelector(":scope > .stage.multistage-active"):e.querySelector(":scope .stage.multistage-active");return r?Array.from(t).indexOf(r):(console.error("The container has no active stage"),!1)}}),this.stages=this.directChildrenOnly?e.querySelectorAll(":scope > .stage"):e.querySelectorAll(":scope .stage"),this.stages.forEach(((t,n)=>{0===n?s(t,this):o(t,this),t.querySelectorAll(":scope [data-multistage-action]").forEach((t=>{let n=()=>{let n=t.getAttribute("data-multistage-action");n.startsWith("+")?function(e,t,n){let i=n.stages,a=e.replace(/^\+/,""),c=n.directChildrenOnly?t.querySelector(":scope > .stage.multistage-active"):t.querySelector(":scope .stage.multistage-active");if(!c)return console.error("The container has no active stage"),!1;let l=Array.from(i).indexOf(c);n.fn.beforeIncrement&&n.fn.beforeIncrement(l,c,e,i),r(a)?l+2>i.length?n.loop?(o(c,n),s(i[0],n)):(console.error("Unable to increment any further"),n.fn.afterIncrement&&n.fn.afterIncrement(l,c,e,i,!1)):(o(c,n),s(i[l+1],n),n.fn.afterIncrement&&n.fn.afterIncrement(l,c,e,i,!0)):console.error("Invalid action")}(n,e,this):n.startsWith("-")&&function(e,t,n){let i=n.stages,a=e.replace(/^\+/,""),c=n.directChildrenOnly?t.querySelector(":scope > .stage.multistage-active"):t.querySelector(":scope .stage.multistage-active");if(!c)return console.error("The container has no active stage"),!1;let l=Array.from(i).indexOf(c);n.fn.beforeIncrement&&n.fn.beforeIncrement(l,c,e,i),r(a)?l-1<0?n.loop?(o(c,n),s(i[i.length-1],n)):(console.error("Unable to decrement any further"),n.fn.afterIncrement&&n.fn.afterIncrement(l,c,e,i,!1)):(o(c,n),s(i[l-1],n),n.fn.afterIncrement&&n.fn.afterIncrement(l,c,e,i,!0)):console.error("Invalid action")}(n,e,this)},i=(t.getAttribute("data-multistage-events")??"").split(" ").filter(Boolean);i.length||(i=["click"]),i.forEach((e=>t.addEventListener(e,n)))}))})),!0}};Multistage=t.default})();